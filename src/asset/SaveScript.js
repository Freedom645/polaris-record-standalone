javascript:(()=>{const exportPage=window.open("","_blank");if(!exportPage){alert("ポップアップがブロックされました。Safariの設定を確認してください。");return} exportPage.document.write("<p>データ取得中...</p>");exportPage.document.title="読み込み中...";(async()=>{try{const formData=new URLSearchParams({service_kind:"music_data",pdata_kind:"music_data",});const response=await fetch("https://p.eagate.573.jp/game/polarischord/pc/json/pdata_getdata.html",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:formData.toString(),credentials:"include",});if(!response.ok){throw new Error("HTTPエラー: "+response.status)} const json=await response.json();if(json.status!=0||json.data.status!=0||!json.data.play_data||!json.data.score_data){throw new Error("e-amuエラー: e-amusementで内部エラーが発生しました。")} if(json.data.play_data.result===1){throw new Error("e-amuエラー: プレーデータがありませんでした。")} const text=JSON.stringify(json,null,2);let isSuccess=!1;try{await navigator.clipboard.writeText(text);isSuccess=!0}catch(e){isSuccess=!1} if(isSuccess){exportPage.close();alert("データをクリップボードにコピーしました！")}else{exportPage.document.body.innerHTML=` <h1>データ取得成功</h1> <p>以下のデータをコピーして、保存ページに貼り付けてください。</p> <textarea style="width: 95%; height: 400px;">${text.replace(/</g, "&lt;")}</textarea> `;exportPage.document.title="コピー用データ"}}catch(err){exportPage.document.body.innerHTML=`<p>エラーが発生しました: ${err.message}</p>`;exportPage.document.title="エラー";console.error(err)}})()})()